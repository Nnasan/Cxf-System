import{D as e,C as a,L as l,E as t,r as o,o as d,e as n,f as r,g as s,w as u,h as c,t as i,p as m,i as p}from"./vendor.12f57d03.js";import{f}from"./index.cf81e116.js";import{$ as g}from"./jquery.5edb227f.js";const h={name:"basetable",methods:{handleSelect(e){this.formCompletion.desc3=e.clId},giveValue(e){const a=e.target.value;for(var l=0;l<this.restaurants.length;l++)this.restaurants[l].value===a&&(this.formCompletion.desc3=this.restaurants[l].clIds)},querySearch(e,a){f(null,"./class/selectall").then((l=>{for(var t=0;t<l.length;t++)l[t].value=l[t].clName;this.restaurants=l;var o=l,d=e?o.filter(this.createFilter(e)):o;a(d)}))},createFilter:e=>a=>a.value.toLowerCase().indexOf(e.toLowerCase())>-1},setup(){const o=e({isRecall:!1,dSno:"",sSno:"",cSno:"",clName:"",pageIndex:1,pageSize:10}),d=a([]),n=a(0),r=()=>{var e;e=o.isRecall?"./errorcode/select":"./record/selectAllCondition",f(o,e).then((e=>{d.value=e.list,n.value=e.total||0}))};r();const s=a(!1),u=e({sId:"",cId:"",rId:"",sSno:"",sName:"",clName:"",dSno:"",cSno:"",date:"",remarks:"",updatescore:"",status:""}),c=e({statusEntity:"",temp:"",region:"",desc1:"",desc2:"",desc3:"",desc4:""});return{restaurants:[],formCompletion:c,query:o,tableData:d,pageTotal:n,editVisible:s,form:u,saveDelayEdit:()=>{s.value=!1,u.status=!1,g.ajax({type:"POST",url:"/record/checkerUpdate",async:!1,data:JSON.stringify(u),dataType:"text",contentType:"application/json",success:function(e){null!=e&&""!==e?(t.success("驳回成功"),r()):t.error("驳回失败，请联系管理员")}}).responseText},handleSearch:()=>{o.pageIndex=1,r()},handlePageChange:e=>{o.pageIndex=e,r()},handleEdit:(e,a)=>{u.sId=a.sId,u.rId=a.rId,u.sSno=a.sSno,u.sName=a.sName,u.clName=a.clName,u.dSno=a.dSno,u.dName=a.dName,u.updatescore=a.updatescore,u.date=a.date,u.status=a.status,u.cId=a.cId,u.cSno=localStorage.getItem("ms_username"),c.statusEntity=a.status?"已批准":a.cId?"已驳回":"未批准",u.remarks=a.remarks,s.value=!0},saveEdit:()=>{s.value=!1,u.status=!0,g.ajax({type:"POST",url:"/record/checkerUpdate",async:!1,data:JSON.stringify(u),dataType:"text",contentType:"application/json",success:function(e){null!=e&&""!==e?(t.success("审核通过"),r()):t.error("审核通过失败，请联系管理员")}}).responseText},handlerChecker:()=>{l.confirm("确定要一键审核吗？","提示",{type:"warning"}).then((()=>{g.ajax({type:"POST",url:"/record/checkerAll",async:!1,data:{cSno:localStorage.getItem("ms_username")},dataType:"text",success:function(e){null!=e&&""!==e?(t.success("一键审核成功"),r()):(t.error("一键审核失败,请稍后再试"),r())}}).responseText})).catch((()=>{}))}}}},y={class:"crumbs"},b=(e=>(m("data-v-a93b261e"),e=e(),p(),e))((()=>r("i",{class:"el-icon-lx-cascades"},null,-1))),V=c(" 审核查询 "),S={class:"container"},v={class:"handle-box"},C=c("搜索"),_=c("一键审核"),k=c("是否仅查看申请撤销的考勤"),x=c("操作 "),N={class:"pagination"},I={class:"dialog-footer"},q=c("取 消"),U=c("驳 回"),T=c("通 过");h.render=function(e,a,l,t,m,p){const f=o("el-breadcrumb-item"),g=o("el-breadcrumb"),h=o("el-input"),w=o("el-autocomplete"),E=o("el-button"),j=o("el-checkbox"),O=o("el-table-column"),D=o("el-tanle-column"),P=o("el-tag"),z=o("el-table"),R=o("el-pagination"),L=o("el-form-item"),A=o("el-form"),B=o("el-dialog");return d(),n("div",null,[r("div",y,[s(g,{separator:"/"},{default:u((()=>[s(f,null,{default:u((()=>[b,V])),_:1})])),_:1})]),r("div",S,[r("div",v,[s(h,{modelValue:t.query.cSno,"onUpdate:modelValue":a[0]||(a[0]=e=>t.query.cSno=e),placeholder:"审核员学号",class:"handle-input mr10"},null,8,["modelValue"]),s(h,{modelValue:t.query.dSno,"onUpdate:modelValue":a[1]||(a[1]=e=>t.query.dSno=e),placeholder:"录入员学号",class:"handle-input mr10"},null,8,["modelValue"]),s(h,{modelValue:t.query.sSno,"onUpdate:modelValue":a[2]||(a[2]=e=>t.query.sSno=e),placeholder:"学生学号",class:"handle-input mr10"},null,8,["modelValue"]),s(w,{class:"inline-input",modelValue:t.query.clName,"onUpdate:modelValue":a[3]||(a[3]=e=>t.query.clName=e),"fetch-suggestions":p.querySearch,"trigger-on-focus":!1,placeholder:"班级",onBlur:p.giveValue,onSelect:p.handleSelect},null,8,["modelValue","fetch-suggestions","onBlur","onSelect"]),s(E,{type:"primary",icon:"el-icon-search",onClick:t.handleSearch},{default:u((()=>[C])),_:1},8,["onClick"]),s(E,{type:"primary",icon:"el-icon-document",onClick:t.handlerChecker},{default:u((()=>[_])),_:1},8,["onClick"]),s(j,{modelValue:t.query.isRecall,"onUpdate:modelValue":a[4]||(a[4]=e=>t.query.isRecall=e)},{default:u((()=>[k])),_:1},8,["modelValue"])]),s(z,{data:t.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:u((()=>[s(O,{prop:"sSno",label:"学生学号",align:"center"}),s(O,{prop:"sName",label:"学生名",align:"center"}),s(D,{prop:"clName",label:"班级",align:"center"}),s(O,{prop:"dName",label:"录入员",align:"center"}),s(O,{prop:"updatescore",label:"修改分数",align:"center"}),s(O,{prop:"date",label:"计入日期",align:"center"}),s(O,{prop:"status",label:"状态",align:"center"},{default:u((e=>[s(P,{type:e.row.status?"success":e.row.cId?"info":"danger"},{default:u((()=>[c(i(e.row.status?"已批准":e.row.cId?"已驳回":"未批准"),1)])),_:2},1032,["type"])])),_:1}),s(O,{prop:"remarks",label:"备注",align:"center"}),s(O,{label:"操作",align:"center"},{default:u((e=>[s(E,{type:"text",icon:"el-icon-edit",onClick:a=>t.handleEdit(e.$index,e.row)},{default:u((()=>[x])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),r("div",N,[s(R,{background:"",layout:"total, prev, pager, next","current-page":t.query.pageIndex,"page-size":t.query.pageSize,total:t.pageTotal,onCurrentChange:t.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),s(B,{title:"编辑",modelValue:t.editVisible,"onUpdate:modelValue":a[14]||(a[14]=e=>t.editVisible=e),width:"30%"},{footer:u((()=>[r("span",I,[s(E,{onClick:a[13]||(a[13]=e=>t.editVisible=!1)},{default:u((()=>[q])),_:1}),s(E,{type:"info",onClick:t.saveDelayEdit},{default:u((()=>[U])),_:1},8,["onClick"]),s(E,{type:"success",onClick:t.saveEdit},{default:u((()=>[T])),_:1},8,["onClick"])])])),default:u((()=>[s(A,{"label-width":"70px"},{default:u((()=>[s(L,{label:"学生学号"},{default:u((()=>[s(h,{disabled:"",readonly:"",modelValue:t.form.sSno,"onUpdate:modelValue":a[5]||(a[5]=e=>t.form.sSno=e)},null,8,["modelValue"])])),_:1}),s(L,{label:"学生名"},{default:u((()=>[s(h,{disabled:"",readonly:"",modelValue:t.form.sName,"onUpdate:modelValue":a[6]||(a[6]=e=>t.form.sName=e)},null,8,["modelValue"])])),_:1}),s(L,{label:"班级"},{default:u((()=>[s(h,{disabled:"",readonly:"",modelValue:t.form.clName,"onUpdate:modelValue":a[7]||(a[7]=e=>t.form.clName=e)},null,8,["modelValue"])])),_:1}),s(L,{label:"录入员"},{default:u((()=>[s(h,{disabled:"",readonly:"",modelValue:t.form.dName,"onUpdate:modelValue":a[8]||(a[8]=e=>t.form.dName=e)},null,8,["modelValue"])])),_:1}),s(L,{label:"修改分数"},{default:u((()=>[s(h,{disabled:"",readonly:"",modelValue:t.form.updatescore,"onUpdate:modelValue":a[9]||(a[9]=e=>t.form.updatescore=e)},null,8,["modelValue"])])),_:1}),s(L,{label:"计入日期"},{default:u((()=>[s(h,{disabled:"",readonly:"",modelValue:t.form.date,"onUpdate:modelValue":a[10]||(a[10]=e=>t.form.date=e)},null,8,["modelValue"])])),_:1}),s(L,{label:"状态"},{default:u((()=>[s(h,{disabled:"",readonly:"",modelValue:t.formCompletion.statusEntity,"onUpdate:modelValue":a[11]||(a[11]=e=>t.formCompletion.statusEntity=e)},null,8,["modelValue"])])),_:1}),s(L,{label:"备注"},{default:u((()=>[s(h,{disabled:"",readonly:"",modelValue:t.form.remarks,"onUpdate:modelValue":a[12]||(a[12]=e=>t.form.remarks=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])},h.__scopeId="data-v-a93b261e";export default h;
